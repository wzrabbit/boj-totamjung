"use strict";(self.webpackChunktotamjung=self.webpackChunktotamjung||[]).push([[1801],{"./src/components/Widget/Widget.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Widget_stories});var react=__webpack_require__("./node_modules/react/index.js"),commands=__webpack_require__("./src/constants/commands.ts"),checkedAlgorithmIdsValidator=__webpack_require__("./src/domains/dataHandlers/validators/checkedAlgorithmIdsValidator.ts"),hiderOptionsValidator=__webpack_require__("./src/domains/dataHandlers/validators/hiderOptionsValidator.ts");const $=(queryName,element)=>{const loadedElement=element?element.querySelector(queryName):document.querySelector(queryName);return loadedElement instanceof HTMLElement?loadedElement:null},$$=(queryName,element)=>{const loadedElements=element?Array.from(element.querySelectorAll(queryName)):Array.from(document.querySelectorAll(queryName)),htmlElements=[];return loadedElements.forEach((loadedElement=>{loadedElement instanceof HTMLElement&&htmlElements.push(loadedElement)})),htmlElements},widget_useLockTimer=()=>{const[isTimerRunning,setIsTimerRunning]=(0,react.useState)(!1),[endTime,setEndTime]=(0,react.useState)(0),[timerDisplayText,setTimerDisplayText]=(0,react.useState)("보기");(0,react.useEffect)((()=>{if(!isTimerRunning)return void setTimerDisplayText("보기");const lockTimer=setInterval((()=>{(()=>{const remainTime=endTime-Date.now();if(remainTime<=0)return setTimerDisplayText("보기"),void setIsTimerRunning(!1);const remainHours=Math.floor(remainTime/36e5),remainMinutes=String(Math.floor(remainTime%36e5/6e4)).padStart(2,"0"),remainSeconds=String(Math.floor(remainTime%6e4/1e3)).padStart(2,"0");setTimerDisplayText(`잠김 (🔒︎${remainHours}:${remainMinutes}:${remainSeconds} 후 보기 가능)`)})()}),100);return()=>{clearInterval(lockTimer)}}),[isTimerRunning,endTime]);return{isTimerRunning,timerDisplayText,setTimerByDuration:duration=>{const newEndTime=Date.now()+duration;setEndTime(newEndTime),setIsTimerRunning(!0)},setTimerByEndTime:endTime=>{setEndTime(endTime),setIsTimerRunning(!0)},clearTimer:()=>{setIsTimerRunning(!1)}}};var algorithmInfos=__webpack_require__("./src/constants/algorithmInfos.ts");const useInjectedProblemTags=params=>{const{checkedIds,hiderOptions}=params,{isTimerRunning,timerDisplayText,setTimerByDuration,setTimerByEndTime,clearTimer}=widget_useLockTimer(),[hasUnknownAlgorithms,setHasUnknownAlgorithms]=(0,react.useState)(!1),[isSpoilerExist,setIsSpoilerExist]=(0,react.useState)(!1),[isSpoilerOpened,setIsSpoilerOpened]=(0,react.useState)(!1),[isHighlighted,setIsHighlighted]=(0,react.useState)(!1),spoilerButtonRef=(0,react.useRef)(null),spoilerContainerRef=(0,react.useRef)(null);(0,react.useEffect)((()=>{(async()=>{const remainingTime=await chrome.runtime.sendMessage({command:commands.Lo.GET_REMAINING_LOCK_TIME});"number"==typeof remainingTime&&0!==remainingTime&&setTimerByDuration(remainingTime)})()}),[]),(0,react.useEffect)((()=>{var _spoilerButtonRef$cur;if(!checkedIds||!hiderOptions)return;const openSpoiler=event=>{event.preventDefault(),isTimerRunning||spoilerButtonRef.current&&spoilerContainerRef.current&&(spoilerButtonRef.current.style.display="none",spoilerContainerRef.current.style.display="block",setIsSpoilerOpened(!0))};return(()=>{const originalSpoilerButtonElement=$(".show-spoiler");if(!originalSpoilerButtonElement)return;originalSpoilerButtonElement.getAttribute("disabled")&&setIsSpoilerOpened(!0);const clonedSpoilerButtonElement=originalSpoilerButtonElement.cloneNode(!0);clonedSpoilerButtonElement instanceof HTMLElement&&(spoilerButtonRef.current=clonedSpoilerButtonElement,originalSpoilerButtonElement.after(clonedSpoilerButtonElement),originalSpoilerButtonElement.remove(),spoilerContainerRef.current=$(".spoiler"),setIsSpoilerExist(!0))})(),isHighlighted||(()=>{const algorithmElements=$$(".spoiler-link"),problemAlgorithmNames=algorithmElements.map((algorithmElement=>algorithmElement.innerText));let hasUnknownAlgorithms=!1;const unknownAlgorithmIndexes=[];problemAlgorithmNames.forEach(((name,index)=>{var _ALGORITHM_INFOS$find;const currentAlgorithmId=null===(_ALGORITHM_INFOS$find=algorithmInfos.u.find((info=>info.name===name||info.englishName===name)))||void 0===_ALGORITHM_INFOS$find?void 0:_ALGORITHM_INFOS$find.id;void 0!==currentAlgorithmId&&checkedIds.includes(currentAlgorithmId)||(hasUnknownAlgorithms=!0,unknownAlgorithmIndexes.push(index))})),unknownAlgorithmIndexes.forEach((index=>{algorithmElements[index].innerText+=" 📌",algorithmElements[index].style.fontWeight="800"})),setHasUnknownAlgorithms(hasUnknownAlgorithms),setIsHighlighted(!0)})(),null===(_spoilerButtonRef$cur=spoilerButtonRef.current)||void 0===_spoilerButtonRef$cur||_spoilerButtonRef$cur.addEventListener("click",openSpoiler),()=>{var _spoilerButtonRef$cur2;null===(_spoilerButtonRef$cur2=spoilerButtonRef.current)||void 0===_spoilerButtonRef$cur2||_spoilerButtonRef$cur2.removeEventListener("click",openSpoiler)}}),[checkedIds,hiderOptions,isTimerRunning,isHighlighted]),(0,react.useEffect)((()=>{spoilerButtonRef.current&&(spoilerButtonRef.current.innerText=timerDisplayText)}),[timerDisplayText]);return{hasUnknownAlgorithms,isSpoilerExist,isSpoilerOpened,setTimerByDuration,setTimerByEndTime,toggleTimer:async()=>{if(isTimerRunning)return clearTimer(),void chrome.runtime.sendMessage({command:commands.Lo.REMOVE_SINGLE_TIMER});chrome.runtime.sendMessage({command:commands.Lo.ADD_SINGLE_TIMER});const hiderOptions=await chrome.runtime.sendMessage({command:commands.Lo.FETCH_HIDER_OPTIONS});if(!(0,hiderOptionsValidator.Oh)(hiderOptions))return;const{hours,minutes}=hiderOptions.problemTagLockDuration;setTimerByDuration(36e5*hours+6e4*minutes)}}};var defaultValues=__webpack_require__("./src/constants/defaultValues.ts"),quickSlotsValidator=__webpack_require__("./src/domains/dataHandlers/validators/quickSlotsValidator.ts"),typeGuards=__webpack_require__("./src/types/typeGuards.ts");const isSolvedAcSearchProblemInfo=data=>(0,typeGuards.Gv)(data)&&"problemId"in data&&"titleKo"in data&&"level"in data&&"number"==typeof data.problemId&&"string"==typeof data.titleKo&&(0,typeGuards.Lq)(data.level),widget_useRandomDefense=params=>{const{onToast}=params,[isRandomDefenseAvailable,setIsRandomDefenseAvailable]=(0,react.useState)(!1),isRandomDefenseAvailableRef=(0,react.useRef)(isRandomDefenseAvailable),pressedKeysRef=(0,react.useRef)(new Set),pressedCodesRef=(0,react.useRef)(new Set),quickSlotsResponseRef=(0,react.useRef)(defaultValues.Q6);(0,react.useEffect)((()=>((async()=>{const response=await chrome.runtime.sendMessage({command:commands.Lo.FETCH_QUICK_SLOTS});(0,quickSlotsValidator.Wb)(response)&&(quickSlotsResponseRef.current=response,isRandomDefenseAvailableRef.current=!0,setIsRandomDefenseAvailable(!0))})(),document.addEventListener("keydown",addPressedKeyInfo),document.addEventListener("keyup",deletePressedKeyInfo),chrome.storage.onChanged.addListener(updateQuickSlotsIfLocalChanged),()=>{document.removeEventListener("keydown",addPressedKeyInfo),document.removeEventListener("keyup",deletePressedKeyInfo),chrome.storage.onChanged.removeListener(updateQuickSlotsIfLocalChanged)})),[]);const updateQuickSlotsIfLocalChanged=(changes,areaName)=>{if("local"!==areaName||!("quickSlots"in changes))return;const{newValue}=changes.quickSlots;(0,quickSlotsValidator.Wb)(newValue)&&(quickSlotsResponseRef.current=newValue)},addPressedKeyInfo=event=>{const key=event.key,code=event.code;pressedKeysRef.current.add(key),pressedCodesRef.current.add(code);const altPressed=event.altKey,f2Pressed=pressedCodesRef.current.has("F2");if(!(!isNaN(Number(event.key))||event.code.startsWith("Digit")))return;const{hotkey}=quickSlotsResponseRef.current,currentNumberKey=isNaN(Number(event.key))?Number(event.code.at(-1)):Number(event.key);(0,quickSlotsValidator.sG)(currentNumberKey)&&("Alt"===hotkey&&altPressed||"F2"===hotkey&&f2Pressed)&&performRandomDefense(currentNumberKey,"keydown")},deletePressedKeyInfo=event=>{const key=event.key,code=event.code;pressedKeysRef.current.delete(key),pressedCodesRef.current.delete(code)},performRandomDefense=async(selectedSlotNo,method)=>{if(!isRandomDefenseAvailableRef.current)return;isRandomDefenseAvailableRef.current=!1,setIsRandomDefenseAvailable(!1);const{slots}=quickSlotsResponseRef.current,selectedSlot=slots[selectedSlotNo];if(selectedSlot.isEmpty)return"click"===method&&onToast({title:`${selectedSlotNo}번 슬롯은 현재 비어 있습니다.`,mainIconSrc:chrome.runtime.getURL("dice.png"),descriptions:["추첨을 만들지 않으셨다면, 설정에서 해당 슬롯에 추첨을 먼저 만들어 주세요!","설정의 퀵슬롯 메뉴에서 선택된 슬롯 번호를 변경하는 것으로 위젯 클릭 시 사용할 추첨의 슬롯을 정하실 수 있습니다."]},8e3),isRandomDefenseAvailableRef.current=!0,void setIsRandomDefenseAvailable(!0);const randomDefenseResultResponse=await chrome.runtime.sendMessage({command:commands.Lo.GET_RANDOM_DEFENSE_RESULT,query:selectedSlot.query});if(!(data=>{if(!(0,typeGuards.Gv)(data)||!("success"in data)||"boolean"!=typeof data.success)return!1;const{success}=data;if(success)return"problemInfo"in data&&isSolvedAcSearchProblemInfo(data.problemInfo);if("statusCode"in data&&"number"!=typeof data.statusCode)return!1;if(!("errorMessage"in data)||"string"!=typeof data.errorMessage)return!1;if(!("errorDescriptions"in data))return!0;const{errorDescriptions}=data;return"string"==typeof errorDescriptions||Array.isArray(errorDescriptions)&&errorDescriptions.every((errorDescription=>"string"==typeof errorDescription))})(randomDefenseResultResponse))return onToast({title:"데이터 불일치가 발견되었습니다.",mainIconSrc:chrome.runtime.getURL("dice.png"),descriptions:"개발자에게 이 문제가 발생했음을 알려 주세요."},8e3),isRandomDefenseAvailableRef.current=!0,void setIsRandomDefenseAvailable(!0);if(!randomDefenseResultResponse.success){const{errorMessage,errorDescriptions}=randomDefenseResultResponse;return onToast({title:errorMessage,mainIconSrc:chrome.runtime.getURL("dice.png"),descriptions:errorDescriptions},8e3),isRandomDefenseAvailableRef.current=!0,void setIsRandomDefenseAvailable(!0)}const{problemInfo}=randomDefenseResultResponse,{problemId,titleKo,level}=problemInfo;chrome.runtime.sendMessage({command:commands.Lo.APPEND_RANDOM_DEFENSE_HISTORY_INFO,randomDefenseHistoryInfo:{problemId,title:titleKo,tier:level,createdAt:(new Date).toISOString()}}),location.href=`https://acmicpc.net/problem/${problemId}`};return{isRandomDefenseAvailable,performRandomDefenseByClick:()=>{performRandomDefense(quickSlotsResponseRef.current.selectedSlotNo,"click")}}};var svg_tier=__webpack_require__("./src/images/svg/tier/index.ts");const TIER_FROM_SRC_REGEX=/\d+(?=\.svg$)/,TIER_FROM_CLASS_TEXT_REGEX=/\d+$/,PROBLEM_ID_FROM_BOARD_BLOCKQUOTE_PROBLEM_TEXT_REGEX=/^\d+/,TIER_BADGE_CSS_SELECTORS=[".page-header:has(#problem_title):not(:has(.problem-label-ac)) .solvedac-tier:not([src*='/0.svg']):not([src*='/-1.svg'])","#problemset tr:not(:has(.problem-label-ac)) .solvedac-tier:not([src*='/0.svg']):not([src*='/-1.svg'])","#status-table td:nth-child(3):not(:has(.result-ac)) .solvedac-tier:not([src*='/0.svg']):not([src*='/-1.svg'])",".col-md-12:has(a[href='/board/list/solvedac']) ~ .col-md-12 .table.table-bordered.table-striped td:nth-child(2):not(:has(.result-ac)) > .solvedac-tier:not([src*='/0.svg']):not([src*='/-1.svg'])",".nav.nav-pills.no-print.problem-menu:not(:has(a[href^=\"https://solved.ac/contribute/\"])) .solvedac-tier:not([src*='/0.svg']):not([src*='/-1.svg'])",".row:has(li[class='active'] > a[href='/category']) ~ .row .table.table-bordered.table-striped td:nth-child(3):not(:has(.result-ac)) > .solvedac-tier:not([src*='/0.svg']):not([src*='/-1.svg'])",".col-md-12:has(a[href='/workbook/top']) ~ .col-md-12 .table.table-bordered.table-striped tr:not(:has(.problem-label-ac)) td:nth-child(2) > .solvedac-tier:not([src*='/0.svg']):not([src*='/-1.svg'])"],changeBoardBlockquoteBadgeTier=async warnTier=>{const boardBlockquoteTierBadgeElement=$(".col-md-12:has(a[href='/board/list/solvedac']) ~ .col-md-12 blockquote > .solvedac-tier:not([src*='/0.svg']):not([src*='/-1.svg'])"),handleElement=$('.loginbar > li > a[href^="/user/"]'),boardBlockquoteProblemTextElement=$(".col-md-12:has(a[href='/board/list/solvedac']) ~ .col-md-12 blockquote > a");if(!(boardBlockquoteTierBadgeElement instanceof HTMLImageElement&&handleElement&&boardBlockquoteProblemTextElement))return;const matchedProblemId=boardBlockquoteProblemTextElement.innerText.match(PROBLEM_ID_FROM_BOARD_BLOCKQUOTE_PROBLEM_TEXT_REGEX),matchedTier=boardBlockquoteTierBadgeElement.src.match(TIER_FROM_SRC_REGEX);if(!matchedProblemId||!matchedTier)return;const handle=handleElement.innerText.trim(),problemId=Number(matchedProblemId),tier=Number(matchedTier);if(!(0,typeGuards.Lq)(tier))return;const isUserSolved=await chrome.runtime.sendMessage({command:commands.Lo.IS_USER_SOLVED_PROBLEM,handle,problemId});"unknown"!==isUserSolved?isUserSolved?boardBlockquoteTierBadgeElement.style.content=`url(${svg_tier.R[tier]})`:tier>=warnTier&&(boardBlockquoteTierBadgeElement.style.content=`url(${svg_tier.K.warn})`):boardBlockquoteTierBadgeElement.remove()},changeRegularBadgeTier=warnTier=>{[...TIER_BADGE_CSS_SELECTORS.map((selector=>$$(selector))).flat()].forEach((tierBadgeElement=>{if(tierBadgeElement instanceof HTMLImageElement){const tier=tierBadgeElement.src.match(TIER_FROM_SRC_REGEX);tier&&Number(tier)>=warnTier&&(tierBadgeElement.style.content=`url(${svg_tier.K.warn})`)}}))},changeTierText=warnTier=>{const tierTextElement=$(".row:has(#problem_title):not(:has(.problem-label-ac)) .solvedac-tier:not([src*='/0.svg']):not([src*='/-1.svg']) + span");if(!tierTextElement)return;const className=tierTextElement.classList[0];if(!className)return;const tier=className.match(TIER_FROM_CLASS_TEXT_REGEX);tier&&Number(tier)>=warnTier&&tierTextElement.classList.add("warn")},changeBojExtendedProblemLinkBox=warnTier=>{$$(".problem-link-style-box:not(.result-ac):not([data-tier='0'])").forEach((problemLinkBoxElement=>{const tier=problemLinkBoxElement.getAttribute("data-tier");tier&&Number(tier)>=warnTier&&problemLinkBoxElement.classList.add("warn")}))},widget_useWidget=params=>{const{theme,onChangeTheme,onToast}=params,[isScrollingToTop,setIsScrollingToTop]=(0,react.useState)(!1),[isExpanded,setIsExpanded]=(0,react.useState)(!1),[checkedIds,setCheckedIds]=(0,react.useState)(void 0),[hiderOptions,setHiderOptions]=(0,react.useState)(void 0),[inspectIconState,setInspectIconState]=(0,react.useState)(!1),[isLoaded,setIsLoaded]=(0,react.useState)(!1),{hasUnknownAlgorithms,isSpoilerExist,isSpoilerOpened,toggleTimer}=useInjectedProblemTags({checkedIds,hiderOptions}),{isRandomDefenseAvailable,performRandomDefenseByClick}=widget_useRandomDefense({onToast}),isRandomDefenseButtonDisabled=!isRandomDefenseAvailable,isInspectButtonDisabled=!isSpoilerExist||isSpoilerOpened||inspectIconState,isLockButtonDisabled=!isSpoilerExist||isSpoilerOpened,shouldShowInspectIcon=isSpoilerExist&&inspectIconState;(0,react.useEffect)((()=>{(async()=>{const[checkedAlgorithmIdsResponse,hiderOptionsResponse]=await Promise.all([chrome.runtime.sendMessage({command:commands.Lo.FETCH_CHECKED_ALGORITHM_IDS}),chrome.runtime.sendMessage({command:commands.Lo.FETCH_HIDER_OPTIONS})]);if(!(0,checkedAlgorithmIdsValidator.k)(checkedAlgorithmIdsResponse)||!(0,hiderOptionsValidator.Oh)(hiderOptionsResponse))return;const{checkedIds}=checkedAlgorithmIdsResponse,{algorithmHiderUsage,shouldHideTier,shouldWarnHighTier,warnTier}=hiderOptionsResponse;shouldHideTier&&((warnTier,shouldWarnHighTier)=>{changeBoardBlockquoteBadgeTier(warnTier),shouldWarnHighTier&&(changeRegularBadgeTier(warnTier),changeTierText(warnTier),changeBojExtendedProblemLinkBox(warnTier))})(warnTier,shouldWarnHighTier),"always"===algorithmHiderUsage&&setInspectIconState(!0),setCheckedIds(checkedIds),setHiderOptions(hiderOptionsResponse),setIsLoaded(!0)})()}),[]);return{isExpanded,isScrollingToTop,hasUnknownAlgorithms,isRandomDefenseButtonDisabled,isInspectButtonDisabled,isLockButtonDisabled,shouldShowInspectIcon,isLoaded,scrollToTop:()=>{isScrollingToTop||(setIsScrollingToTop(!0),setTimeout((()=>{window.scroll({top:0,behavior:"smooth"})}),1e3/3))},endScrollingAnimation:()=>{setIsScrollingToTop(!1)},toggleWidgetOpen:event=>{event.preventDefault(),event.stopPropagation(),setIsExpanded((prev=>!prev))},openOptionsPage:()=>{chrome.runtime.sendMessage({command:commands.Lo.OPEN_OPTIONS_PAGE})},toggleTotamjungTheme:()=>{isLoaded&&onChangeTheme("totamjung"===theme?"none":"totamjung")},performRandomDefenseByClick,showInspectResultUsingPopup:()=>{isInspectButtonDisabled||(setInspectIconState(!0),onToast(hasUnknownAlgorithms?{title:"이 문제를 풀기 위해서는 모르는 알고리즘을 사용해야 할 수 있습니다.",mainIconSrc:chrome.runtime.getURL("inspect-result-question.png")}:{title:"이 문제는 알고 있는 알고리즘만으로 풀 수 있습니다.",mainIconSrc:chrome.runtime.getURL("inspect-result-check.png")},3500))},toggleTimer}};var InspectResultIcon=__webpack_require__("./src/components/InspectResultIcon/InspectResultIcon.tsx"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js");const Container=styled_components_browser_esm.I4.div`
  padding-top: 10px;
  color: blue;

  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  position: fixed;
  right: 30px;
  bottom: 30px;

  width: 40px;
  height: 216px;

  pointer-events: none;
  z-index: 1000000;
  transition: 0.3s;

  & * {
    pointer-events: auto;
  }
`,bounceTop=styled_components_browser_esm.i7`
    0% {
        transform: translateY(0);
    }
    33% {
      transform: translateY(5px);
    }
    66% {
      transform: translateY(-7px);
    }
    100% {
      transform: translateY(0);
    }
`,TopButton=styled_components_browser_esm.I4.button`
  display: flex;
  justify-content: center;
  align-items: center;
  position: absolute;

  width: 40px;
  height: 40px;

  border-radius: 20px !important;
  background-color: ${({theme,$widgetTheme})=>"none"===$widgetTheme?theme.color.BOJ_BLUE:theme.color.LIGHTEST_BROWN};

  transition:
    0.3s transform,
    0.1s outline;
  z-index: 1;
  outline: 0px solid
    ${({theme,$widgetTheme})=>"totamjung"===$widgetTheme?theme.color.LIGHTEST_BROWN_TRANSPARENT:theme.color.BOJ_BLUE_TRANSPARENT} !important;

  &:active {
    transform: scale(0.93);
  }

  &:hover,
  &:active {
    outline: 4px solid
      ${({theme,$widgetTheme})=>"totamjung"===$widgetTheme?theme.color.LIGHTEST_BROWN_TRANSPARENT:theme.color.BOJ_BLUE_TRANSPARENT} !important;
  }

  & span {
    background-color: ${({theme,$widgetTheme})=>"none"===$widgetTheme?theme.color.PURE_WHITE:theme.color.BROWN};
  }
`,TopIconContainer=styled_components_browser_esm.I4.div`
  position: relative;

  width: 32px;
  height: 32px;

  ${TopButton}.animate > & {
    animation: ${bounceTop} 1s forwards;
  }
`,TopIconFrag=styled_components_browser_esm.I4.span`
  position: absolute;
  top: 0;
  left: 0;

  width: 17.5px;
  height: 6px;

  border-radius: 4px !important;

  transform: ${({$direction})=>"left"===$direction?"translate(3px, 11px) rotate(-45deg)":"translate(12px, 11px) rotate(45deg)"};
`,DropdownMenu=styled_components_browser_esm.I4.ul`
  display: flex;
  flex-direction: column;
  overflow: hidden;
  position: absolute;

  width: 40px;
  height: ${({$isExpanded})=>$isExpanded?"216px":"40px"};
  padding: 8px 0 0 0;

  border: 2px solid
    ${({theme,$widgetTheme})=>"none"===$widgetTheme?theme.color.BOJ_BLUE:theme.color.LIGHTEST_BROWN};
  border-radius: 20px !important;
  background-color: ${({theme,$widgetTheme})=>"none"===$widgetTheme?"transparent":theme.color.BLACK_TRANSPARENT};

  backdrop-filter: blur(5px);
  transform-origin: center bottom;

  transition:
    height 0.3s,
    scale 0.3s;

  ${TopButton}:active + & {
    scale: 0.93;
  }
`,DropdownMenuItem=styled_components_browser_esm.I4.li`
  width: 36px;
  height: 32px;
`,DropdownMenuButton=styled_components_browser_esm.I4.button`
  display: flex;
  justify-content: center;
  align-items: center;

  width: 100%;
  height: 100%;

  background: transparent;

  transition: background-color 0.3s;

  & > img {
    filter: ${({theme,$widgetTheme})=>"none"===$widgetTheme?theme.filter.BOJ_BLUE_FILTER:theme.filter.LIGHT_BROWN_FILTER};
  }
`,DropdownButtonIcon=styled_components_browser_esm.I4.img`
  width: auto;
  height: 26px;

  transition: transform 0.1s;

  button:disabled > & {
    opacity: 0.6;
  }

  button:not(:disabled) > &:hover {
    transform: scale(1.1);
  }

  button:not(:disabled) > &:active {
    transform: scale(1);
  }
`;var react_dom=__webpack_require__("./node_modules/react-dom/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Widget=props=>{const{theme}=props,{isExpanded,isScrollingToTop,hasUnknownAlgorithms,isRandomDefenseButtonDisabled,isInspectButtonDisabled,isLockButtonDisabled,shouldShowInspectIcon,isLoaded,scrollToTop,endScrollingAnimation,toggleWidgetOpen,openOptionsPage,toggleTotamjungTheme,performRandomDefenseByClick,showInspectResultUsingPopup,toggleTimer}=widget_useWidget(props),problemTitleElement=$("#problem_title");return(0,jsx_runtime.jsx)(Container,{children:isLoaded&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(TopButton,{type:"button",className:isScrollingToTop?"animate":"",$widgetTheme:theme,onClick:scrollToTop,onContextMenu:toggleWidgetOpen,"aria-label":"토탐정 위젯입니다. 클릭하여 웹사이트의 상단으로 이동하거나, 우클릭하여 위젯을 여세요.",children:(0,jsx_runtime.jsxs)(TopIconContainer,{onAnimationEnd:endScrollingAnimation,children:[(0,jsx_runtime.jsx)(TopIconFrag,{$direction:"left"}),(0,jsx_runtime.jsx)(TopIconFrag,{$direction:"right"})]})}),(0,jsx_runtime.jsxs)(DropdownMenu,{$widgetTheme:theme,$isExpanded:isExpanded,children:[(0,jsx_runtime.jsx)(DropdownMenuItem,{children:(0,jsx_runtime.jsx)(DropdownMenuButton,{type:"button",$widgetTheme:theme,"aria-label":"토탐정 설정 페이지로 이동",onClick:openOptionsPage,children:(0,jsx_runtime.jsx)(DropdownButtonIcon,{src:chrome.runtime.getURL("settings.png")})})}),(0,jsx_runtime.jsx)(DropdownMenuItem,{children:(0,jsx_runtime.jsx)(DropdownMenuButton,{type:"button",$widgetTheme:theme,"aria-label":"none"===theme?"토탐정 테마 켜기":"토탐정 테마 끄기",onClick:toggleTotamjungTheme,children:(0,jsx_runtime.jsx)(DropdownButtonIcon,{src:chrome.runtime.getURL("palette.png")})})}),(0,jsx_runtime.jsx)(DropdownMenuItem,{children:(0,jsx_runtime.jsx)(DropdownMenuButton,{type:"button",$widgetTheme:theme,"aria-label":"무작위 문제 추첨하기",disabled:isRandomDefenseButtonDisabled,onClick:performRandomDefenseByClick,children:(0,jsx_runtime.jsx)(DropdownButtonIcon,{src:chrome.runtime.getURL("dice.png")})})}),(0,jsx_runtime.jsx)(DropdownMenuItem,{children:(0,jsx_runtime.jsx)(DropdownMenuButton,{type:"button",disabled:isInspectButtonDisabled,onClick:showInspectResultUsingPopup,$widgetTheme:theme,children:(0,jsx_runtime.jsx)(DropdownButtonIcon,{src:shouldShowInspectIcon?hasUnknownAlgorithms?chrome.runtime.getURL("inspect-result-question.png"):chrome.runtime.getURL("inspect-result-check.png"):chrome.runtime.getURL("search.png")})})}),(0,jsx_runtime.jsx)(DropdownMenuItem,{children:(0,jsx_runtime.jsx)(DropdownMenuButton,{type:"button",disabled:isLockButtonDisabled,onClick:toggleTimer,$widgetTheme:theme,children:(0,jsx_runtime.jsx)(DropdownButtonIcon,{src:chrome.runtime.getURL("lock.png")})})})]}),problemTitleElement&&shouldShowInspectIcon&&(0,react_dom.createPortal)((0,jsx_runtime.jsx)(InspectResultIcon.A,{theme,icon:hasUnknownAlgorithms?"question":"check"}),problemTitleElement)]})})};Widget.displayName="Widget";const Widget_Widget=Widget;try{Widget.displayName="Widget",Widget.__docgenInfo={description:"",displayName:"Widget",props:{theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"enum",value:[{value:'"none"'},{value:'"totamjung"'}]}},onChangeTheme:{defaultValue:null,description:"",name:"onChangeTheme",required:!0,type:{name:"(theme: TotamjungTheme) => void"}},onToast:{defaultValue:null,description:"",name:"onToast",required:!0,type:{name:"(toastInfo: ToastInfo, duration: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Widget/Widget.tsx#Widget"]={docgenInfo:Widget.__docgenInfo,name:"Widget",path:"src/components/Widget/Widget.tsx#Widget"})}catch(__react_docgen_typescript_loader_error){}var _Default$parameters,_Default$parameters2;const Widget_stories={title:"components/Widget",component:Widget_Widget,argTypes:{},parameters:{docs:{description:{component:"`Widget`는 BOJ 웹사이트에서 토탐정의 기능을 쉽게 이용하기 위해, 우측 하단에 표시되는 위젯입니다. 평소에는 TOP 버튼으로써 이용되며, 우클릭 시 위젯의 메뉴를 펼치거나 접을 수 있습니다."}}}},Default={decorators:[Story=>(0,jsx_runtime.jsx)("div",{style:{width:"100%",height:"240px"},children:(0,jsx_runtime.jsx)(Story,{})})],args:{theme:"none",onChangeTheme:()=>{alert("onChangeTheme()")}}};Default.parameters={...Default.parameters,docs:{...null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs,source:{originalSource:"{\n  decorators: [Story => <div style={{\n    width: '100%',\n    height: '240px'\n  }}>\n        <Story />\n      </div>],\n  args: {\n    theme: 'none',\n    onChangeTheme: () => {\n      alert('onChangeTheme()');\n    }\n  }\n}",...null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2=_Default$parameters2.docs)||void 0===_Default$parameters2?void 0:_Default$parameters2.source}}};const __namedExportsOrder=["Default"]},"./src/components/InspectResultIcon/InspectResultIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _styles_theme__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/styles/theme.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const InspectResultIcon=props=>{const{theme,icon}=props,iconSrc="check"===icon?chrome.runtime.getURL("inspect-result-check.png"):chrome.runtime.getURL("inspect-result-question.png"),alt="check"===icon?"이 문제는 알고 있는 알고리즘만으로 풀 수 있는 문제입니다.":"이 문제를 풀기 위해서는 모르는 알고리즘을 사용해야 할 수 있습니다.",styles={width:"26px",height:"26px",margin:"1px 0px 5px 7px",filter:"totamjung"===theme?_styles_theme__WEBPACK_IMPORTED_MODULE_0__.w.filter.LIGHT_BROWN_FILTER:_styles_theme__WEBPACK_IMPORTED_MODULE_0__.w.filter.BOJ_BLUE_FILTER,userSelect:"none"};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("img",{src:iconSrc,style:styles,alt,title:alt,draggable:"false"})};InspectResultIcon.displayName="InspectResultIcon";const __WEBPACK_DEFAULT_EXPORT__=InspectResultIcon;try{InspectResultIcon.displayName="InspectResultIcon",InspectResultIcon.__docgenInfo={description:"content script의 컴포넌트의 구성 요소이나, Shadow DOM 외부로 렌더링되는 컴포넌트이기 때문에,\nstyled-components를 사용하지 않고 inline style을 사용하고 있습니다.",displayName:"InspectResultIcon",props:{theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"enum",value:[{value:'"none"'},{value:'"totamjung"'}]}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"enum",value:[{value:'"check"'},{value:'"question"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/InspectResultIcon/InspectResultIcon.tsx#InspectResultIcon"]={docgenInfo:InspectResultIcon.__docgenInfo,name:"InspectResultIcon",path:"src/components/InspectResultIcon/InspectResultIcon.tsx#InspectResultIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/constants/commands.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{AQ:()=>STORAGE_KEY,Lo:()=>COMMANDS});const COMMANDS={OPEN_OPTIONS_PAGE:"openOptionsPage",FETCH_CHECKED_ALGORITHM_IDS:"fetchCheckedAlgorithmIds",SAVE_CHECKED_ALGORITHM_IDS:"saveCheckedAlgorithmIds",FETCH_RANDOM_DEFENSE_HISTORY:"fetchRandomDefenseHistory",SAVE_RANDOM_DEFENSE_HISTORY:"saveRandomDefenseHistory",FETCH_QUICK_SLOTS:"fetchQuickSlots",SAVE_QUICK_SLOTS:"saveQuickSlots",FETCH_TOTAMJUNG_THEME:"fetchTotamjungTheme",SAVE_TOTAMJUNG_THEME:"saveTotamjungTheme",FETCH_HIDER_OPTIONS:"fetchHiderOptions",SAVE_HIDER_OPTIONS:"saveHiderOptions",FETCH_FONT_NO:"fetchFontNo",SAVE_FONT_NO:"saveFontNo",FETCH_TIMERS:"fetchTimers",SAVE_TIMERS:"saveTimers",FETCH_OPTIONS_DATA:"fetchOptionsData",GET_REMAINING_LOCK_TIME:"saveAndGetRemainingLockTime",ADD_SINGLE_TIMER:"addSingleTimer",REMOVE_SINGLE_TIMER:"removeSingleTimer",IS_USER_SOLVED_PROBLEM:"isUserSolvedProblem",GET_RANDOM_DEFENSE_RESULT:"getRandomDefenseResult",APPEND_RANDOM_DEFENSE_HISTORY_INFO:"appendRandomDefenseHistoryInfo"},STORAGE_KEY={DATA_VERSION:"dataVersion",CHECKED_ALGORITHM_IDS:"checkedAlgorithmIds",QUICK_SLOTS:"quickSlots",TOTAMJUNG_THEME:"totamjungTheme",HIDER_OPTIONS:"hiderOptions",RANDOM_DEFENSE_HISTORY:"randomDefenseHistory",IS_TIER_HIDDEN:"isTierHidden",FONT_NO:"fontNo",TIMERS:"timers"}},"./src/constants/defaultValues.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q6:()=>DEFAULT_QUICK_SLOTS_RESPONSE,o:()=>DEFAULT_INITIAL_DATA});var _commands__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/constants/commands.ts");const DEFAULT_QUICK_SLOTS={1:{isEmpty:!0},2:{isEmpty:!0},3:{isEmpty:!0},4:{isEmpty:!0},5:{isEmpty:!0},6:{isEmpty:!0},7:{isEmpty:!0},8:{isEmpty:!0},9:{isEmpty:!0},0:{isEmpty:!0}},DEFAULT_QUICK_SLOTS_RESPONSE={hotkey:"Alt",selectedSlotNo:1,slots:DEFAULT_QUICK_SLOTS},DEFAULT_INITIAL_DATA={[_commands__WEBPACK_IMPORTED_MODULE_0__.AQ.DATA_VERSION]:"v1.2",[_commands__WEBPACK_IMPORTED_MODULE_0__.AQ.CHECKED_ALGORITHM_IDS]:[1,2],[_commands__WEBPACK_IMPORTED_MODULE_0__.AQ.QUICK_SLOTS]:DEFAULT_QUICK_SLOTS_RESPONSE,[_commands__WEBPACK_IMPORTED_MODULE_0__.AQ.TOTAMJUNG_THEME]:"none",[_commands__WEBPACK_IMPORTED_MODULE_0__.AQ.HIDER_OPTIONS]:{problemTagLockDuration:{hours:0,minutes:20},shouldHideTier:!1,shouldWarnHighTier:!1,warnTier:1,algorithmHiderUsage:"click",problemTagLockUsage:"click"},[_commands__WEBPACK_IMPORTED_MODULE_0__.AQ.RANDOM_DEFENSE_HISTORY]:[],[_commands__WEBPACK_IMPORTED_MODULE_0__.AQ.IS_TIER_HIDDEN]:!1,[_commands__WEBPACK_IMPORTED_MODULE_0__.AQ.FONT_NO]:0,[_commands__WEBPACK_IMPORTED_MODULE_0__.AQ.TIMERS]:[]}},"./src/domains/dataHandlers/validators/checkedAlgorithmIdsValidator.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k:()=>isValidCheckedAlgorithmIdsResponse,v:()=>isValidCheckedAlgorithmIds});var _types_typeGuards__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/types/typeGuards.ts");const isValidCheckedAlgorithmIds=data=>!!Array.isArray(data)&&data.every((value=>"number"==typeof value&&!isNaN(value)&&value%1==0&&value>=1)),isValidCheckedAlgorithmIdsResponse=data=>!(!(0,_types_typeGuards__WEBPACK_IMPORTED_MODULE_0__.Gv)(data)||!("checkedIds"in data))&&isValidCheckedAlgorithmIds(data.checkedIds)},"./src/domains/dataHandlers/validators/hiderOptionsValidator.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Oh:()=>isHiderOptionsResponse});var _types_typeGuards__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/types/typeGuards.ts");const isHiderOptionsResponse=data=>{if(!((0,_types_typeGuards__WEBPACK_IMPORTED_MODULE_0__.Gv)(data)&&"problemTagLockDuration"in data&&"shouldHideTier"in data&&"shouldWarnHighTier"in data&&"warnTier"in data&&"algorithmHiderUsage"in data&&"problemTagLockUsage"in data&&(0,_types_typeGuards__WEBPACK_IMPORTED_MODULE_0__.Gv)(data.problemTagLockDuration)&&"hours"in data.problemTagLockDuration&&"minutes"in data.problemTagLockDuration&&"number"==typeof data.problemTagLockDuration.hours&&"number"==typeof data.problemTagLockDuration.minutes&&"boolean"==typeof data.shouldHideTier&&"boolean"==typeof data.shouldWarnHighTier&&(0,_types_typeGuards__WEBPACK_IMPORTED_MODULE_0__.br)(data.warnTier)&&"string"==typeof data.algorithmHiderUsage&&["click","always"].includes(data.algorithmHiderUsage)&&"string"==typeof data.problemTagLockUsage&&["click","auto"].includes(data.problemTagLockUsage)))return!1;const{hours,minutes}=data.problemTagLockDuration;return hours>=0&&hours<100&&minutes>=0&&minutes<60&&hours%1==0&&minutes%1==0}},"./src/domains/dataHandlers/validators/quickSlotsValidator.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Wb:()=>isQuickSlotsResponse,sG:()=>isSlotNo});var _types_typeGuards__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/types/typeGuards.ts");const isSlot=data=>!(!(0,_types_typeGuards__WEBPACK_IMPORTED_MODULE_0__.Gv)(data)||!("isEmpty"in data)||"boolean"!=typeof data.isEmpty)&&(!!data.isEmpty||"title"in data&&"query"in data&&"string"==typeof data.title&&"string"==typeof data.query),isSlotNo=data=>"number"==typeof data&&[1,2,3,4,5,6,7,8,9,0].includes(data),isQuickSlotsResponse=data=>{if(!((0,_types_typeGuards__WEBPACK_IMPORTED_MODULE_0__.Gv)(data)&&"hotkey"in data&&"selectedSlotNo"in data&&"slots"in data&&"string"==typeof data.hotkey&&["Alt","F2"].includes(data.hotkey)&&isSlotNo(data.selectedSlotNo)))return!1;const{slots}=data;return!!(0,_types_typeGuards__WEBPACK_IMPORTED_MODULE_0__.hj)(slots)&&Array.from({length:10}).every(((_,key)=>key in slots&&isSlot(slots[key])))}},"./src/types/typeGuards.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Gv:()=>isObject,H9:()=>isNumericArray,Lq:()=>isTierWithoutNotRatable,br:()=>isRatedTier,hj:()=>isNumericObject,hz:()=>isIsoString});const isObject=data=>"object"==typeof data&&null!==data,isNumericObject=data=>isObject(data)&&Object.keys(data).every((key=>!isNaN(Number(key)))),isNumericArray=data=>Array.isArray(data)&&data.every((value=>"number"==typeof value)),isIsoString=data=>"string"==typeof data&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/.test(data),isTier=data=>"number"==typeof data&&data%1==0&&data>=0&&data<=31,isTierWithoutNotRatable=data=>isTier(data)&&31!==data,isRatedTier=data=>isTier(data)&&0!==data&&31!==data}}]);
//# sourceMappingURL=components-Widget-Widget-stories.193b9ce6.iframe.bundle.js.map