import{j as t}from"./jsx-runtime-Cf8x2fCZ.js";import{R as D}from"./RandomDefenseHistoryList-B78fE5FN.js";import{r as p}from"./index--qcDGAq6.js";import{S as c}from"./commands-BoKETmK5.js";import{s as I,a as E}from"./isTierHiddenSanitizer-BOyoG-TY.js";import{d as i}from"./styled-components.browser.esm-CIS6JKSM.js";import{S}from"./Switch-Bs6u4NSz.js";import{N as R}from"./NamedFrame-D2PEwBHE.js";import{S as u}from"./SimpleModal-Dgc3kYAu.js";import{F as T}from"./FallbackWithImage-MjNdhJT-.js";import{L as b}from"./Loading-DfWylf4Y.js";import{S as Y}from"./trash-JRBuQ8nU.js";import{S as C}from"./package-pspu3cL5.js";import{c as x,a as W}from"./randomDefense-DE7lwrZG.js";import{T as h}from"./Text-DzSB0Vx2.js";import{u as B}from"./useModal-BJrESIr1.js";import{t as g}from"./theme-CqSsbPCW.js";const F="data:image/png;base64,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",L=async()=>{const e=await browser.storage.local.get([c.RANDOM_DEFENSE_HISTORY,c.IS_TIER_HIDDEN]),r=e[c.RANDOM_DEFENSE_HISTORY],o=e[c.IS_TIER_HIDDEN],n=I(r),a=E(o);return{randomDefenseHistory:n,isHidden:a}},O=async(e,r)=>{if(!Array.isArray(e)||typeof r!="boolean")return;const o=I(e);browser.storage.local.set({[c.RANDOM_DEFENSE_HISTORY]:o,[c.IS_TIER_HIDDEN]:r})},M=()=>{const[e,r]=p.useState([]),[o,n]=p.useState(!0),[a,d]=p.useState(!1),l=e.length===0;return p.useEffect(()=>{(async()=>{const s=await L();n(s.isHidden),r(s.randomDefenseHistory),d(!0)})()},[]),p.useEffect(()=>{a&&O(e,o)},[e,o]),{items:e,isHidden:o,isLoaded:a,isEmpty:l,deleteHistoryById:s=>{const f=e.filter(A=>`${A.problemId}-${A.createdAt}`!==s);r(f)},clearHistory:()=>{r([])},updateIsHidden:s=>{n(s.target.checked)}}},Q=i.div`
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  row-gap: 10px;

  width: 100%;
  height: 100%;
`,w=i.div`
  width: 348px;
  height: 429px;
  padding: 8px;

  border: 1px solid ${({theme:e})=>e.color.LIGHT_BROWN};
  border-radius: 6px;
`,G=i.div`
  display: flex;
  align-items: center;
  column-gap: 10px;

  margin-top: 8px;
  height: 30px;
`,P=i.div`
  display: flex;
  align-items: center;
  column-gap: 10px;

  height: 36px;

  margin-right: 26px;
`,j=i.button`
  width: 36px;
  height: 36px;

  border: 1px solid ${({theme:e})=>e.color.RED};
  border-radius: 4px;
  background: none;

  transition: 0.2s;

  svg {
    color: ${({theme:e})=>e.color.RED};
  }

  &:hover {
    box-shadow: 0 0 8px ${({theme:e})=>e.color.RED};
  }

  &:disabled {
    opacity: 0.5;
    box-shadow: none;
  }
`,v=i.div`
  display: flex;
  column-gap: 4px;

  height: 20px;
  margin-bottom: 16px;
  margin-right: auto;
`,z=i.div`
  color: ${({$color:e})=>e};
  font-size: 14px;
  line-height: 20px;
`,Z=i.div`
  width: 20px;
  height: 20px;

  svg {
    width: 20px;
    height: 20px;

    color: ${({theme:e})=>e.color.GOLD};
  }
`,N=e=>{const r=x-e,o=r>=W?"normal":r>0?"warn":"danger",d=`${`현재 ${e}문제가 기록에 저장되어 있으며, 저장할 수 있는 최대 문제 수는 ${x}문제입니다.
저장할 수 있는 최대 문제 수를 넘을 경우 오래된 문제 순으로 기록에서 삭제됩니다.`}${o==="warn"?`

저장된 문제 수가 최대 문제 수에 가까워지고 있습니다. 원치 않는 기록 삭제를 방지하려면 문제 공간을 확보해 주세요.`:o==="danger"?`

저장된 문제 수가 최대 문제 수에 도달했습니다. 이 상태에서는 추첨 진행 시 오래된 기록들이 삭제될 것입니다. 원치 않는 기록 삭제를 방지하려면 문제 공간을 확보해 주세요.`:""}`,l=o==="normal"?g.color.WHITE:o==="warn"?g.color.ORANGE:g.color.LIGHT_RED;return{indicatorMessage:d,indicatorColor:l}},de=()=>{const{items:e,isHidden:r,isLoaded:o,isEmpty:n,deleteHistoryById:a,clearHistory:d,updateIsHidden:l}=M(),{activeModalName:y,openModal:H,closeModal:m}=B(),{indicatorMessage:s,indicatorColor:f}=N(e.length);return t.jsx(R,{width:"370px",height:"553px",padding:"10px",title:"추첨 기록",children:t.jsxs(Q,{children:[o?t.jsxs(t.Fragment,{children:[t.jsxs(G,{children:[t.jsx(h,{type:"normal",fontSize:16,width:"auto",as:"span",children:"티어 숨기기"}),t.jsx(S,{size:"large",isChecked:r,ariaLabel:"티어 숨기기",onChange:l})]}),t.jsx(w,{children:e.length>0?t.jsx(D,{items:e,isHidden:r,onDelete:a}):t.jsx(T,{imageSrc:F,imageWidth:100,imageHeight:86,title:"추첨 기록",description:"문제를 추첨하면 여기에 기록이 표시될 거에요."})}),t.jsxs(P,{children:[t.jsxs(v,{title:s,children:[t.jsx(Z,{children:t.jsx(C,{})}),t.jsx(z,{$color:f,children:`${e.length} / ${x}`})]}),t.jsx(h,{type:"normal",fontSize:16,width:"auto",as:"span",children:"추첨 기록 비우기"}),t.jsx(j,{onClick:()=>{H("confirmClearHistory")},disabled:n,"aria-label":"추첨 기록 비우기",children:t.jsx(Y,{})})]})]}):t.jsx(b,{}),t.jsx(u,{title:"추첨 기록 전체 제거 확인",actionType:"yesNo",width:"350px",height:"auto",open:y==="confirmClearHistory",message:"모든 추첨 기록을 제거할까요?",onYesSelect:()=>{d(),m()},onNoSelect:m})]})})};export{de as R};
