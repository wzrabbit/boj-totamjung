import{r as i}from"./index-RYns6xqu.js";import{S as u}from"./commands-CzqO23sC.js";import{i as y,a as d,b as f,c as Q,d as k}from"./quickSlotsValidator-UNQ9RKcq.js";import{D as m}from"./defaultValues-5WESY1KB.js";import{b as T,T as _}from"./randomDefense-DFxRSgnp.js";const h=[1,2,3,4,5,6,7,8,9,0],L=(t,e)=>k(t)?t.isEmpty?{isEmpty:!0}:t.query.trim()===""||t.query.length>T?{isEmpty:!0}:t.title.trim()===""||t.title.length>_?{...t,isEmpty:!1,title:`추첨 ${e}`}:t:{isEmpty:!0},p=t=>{if(!y(t))return m;const e="hotkey"in t&&d(t.hotkey)?t.hotkey:"Alt",s="selectedSlotNo"in t&&f(t.selectedSlotNo)?t.selectedSlotNo:1,o={...t,hotkey:e,selectedSlotNo:s};return h.forEach(r=>{const n=o.slots[r];o.slots[r]=L(n,r)}),Q(o)?o:m},N=async()=>{const e=(await browser.storage.local.get(u.QUICK_SLOTS))[u.QUICK_SLOTS];return p(e)},O=(t,e,s)=>{const o={selectedSlotNo:t,slots:e,hotkey:s};if(!y(o))return;const r=p(o);browser.storage.local.set({[u.QUICK_SLOTS]:r})},R={1:{isEmpty:!0},2:{isEmpty:!0},3:{isEmpty:!0},4:{isEmpty:!0},5:{isEmpty:!0},6:{isEmpty:!0},7:{isEmpty:!0},8:{isEmpty:!0},9:{isEmpty:!0},0:{isEmpty:!0}},K=()=>{const[t,e]=i.useState(R),[s,o]=i.useState(1),[r,n]=i.useState("Alt"),[S,E]=i.useState(!1);return i.useEffect(()=>{(async()=>{const{slots:a,selectedSlotNo:c,hotkey:l}=await N();e(a),o(c),n(l),E(!0)})()},[]),i.useEffect(()=>{S&&O(s,t,r)},[s,t,r]),{slots:t,selectedSlotNo:s,hotkey:r,isLoaded:S,setSelectedSlotNo:o,setHotkey:n,updateSlot:(a,c)=>{e(l=>({...l,[s]:{isEmpty:!1,title:a,query:c}}))},deleteSlot:()=>{e(a=>({...a,[s]:{isEmpty:!0}}))}}};export{K as u};
